package com.dxc.darklight.service;

import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import com.dxc.darklight.spider.FinanceNewsSpider;
import com.dxc.darklight.spider.IndividualStockNewsSpide;
import com.dxc.darklight.spider.IndustryInfoSpider;
import com.dxc.darklight.spider.SendPriceAfterStockClosed;
import com.dxc.darklight.spider.StockCurrentPriceSpider;
import com.dxc.darklight.spider.StockDealMountSpider;
import com.dxc.darklight.spider.StockNewsSpider;

public class ServiceFactory {
	private static final Logger log = LogManager
			.getLogger(ServiceFactory.class);

	private static ApplicationContext appContext = new ClassPathXmlApplicationContext(
			"spring-servlet.xml");

	public static StockNewsService createStockNewsService() {
		return appContext.getBean(StockNewsService.class);
	}

	public static IndustryInfoService createIndustryInfoService() {
		return appContext.getBean(IndustryInfoService.class);
	}

	public static StockInfoService createStockInfoService() {
		return appContext.getBean(StockInfoService.class);
	}

	public static TopNewsStockService createTopNewsStockService() {
		return appContext.getBean(TopNewsStockService.class);
	}

	public static UserStockNewsService createUserStockNewsService() {
		return appContext.getBean(UserStockNewsService.class);
	}

	public static StockModelMountService createStockModelMountService() {
		return appContext.getBean(StockModelMountService.class);
	}

	public static IndividualStockNewsService createIndiStockNewsService() {
		return appContext.getBean(IndividualStockNewsService.class);
	}

	public static StockModelMountService createUserStockModelService() {
		return appContext.getBean(StockModelMountService.class);
	}

	public static BlackStockService createBlackStockService() {
		return appContext.getBean(BlackStockService.class);
	}

	public static void main(String[] args) {
		String function = args[0];
		log.info("Function=" + function);
		if ("StockNewsSpider".equals(function)) {
			StockNewsSpider.work();
		} else if ("StockMountSpider".equals(function)) {
			StockDealMountSpider.work();
		} else if ("SendCurrentPriceSpider".equals(function)) {
			StockCurrentPriceSpider.work();
		} else if ("SendPriceAfterStockClosed".equals(function)) {
			SendPriceAfterStockClosed.work();
		} else if ("FinanceNewsSpider".equals(function)) {
			FinanceNewsSpider.work();
		} else if ("IndividualStockNewsSpide".equals(function)) {
			IndividualStockNewsSpide.work();
		}else if ("IndustryStocksSpider".equals(function)) {
			//获取A股全部的股票信息，每天晚上5点跑一次
			IndustryInfoSpider.work();
		}

	}
}
